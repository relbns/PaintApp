{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/Statistics.vue?4db6","webpack:///./src/App.vue","webpack:///./src/components/Toolbar.vue","webpack:///./src/components/Toolbar.vue?7c92","webpack:///./src/components/PaintCanvas.vue","webpack:///./src/services/imageService.js","webpack:///./src/components/PaintCanvas.vue?f8b3","webpack:///./src/components/Statistics.vue","webpack:///./src/components/Statistics.vue?ba12","webpack:///./src/components/LeftImages.vue","webpack:///./src/components/LeftImages.vue?539d","webpack:///./src/App.vue?8ecf","webpack:///./src/main.js","webpack:///./src/App.vue?9f07","webpack:///./src/components/PaintCanvas.vue?e677","webpack:///./src/components/LeftImages.vue?a597","webpack:///./src/components/Toolbar.vue?280a"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","id","_createElementBlock","_hoisted_1","_createElementVNode","_createVNode","_component_Toolbar","onChangeBrushColor","$options","updateBrushColor","onChangeBrushSize","updateBrushSize","onChangeBackgroundColor","updateBgColor","onChangeBackgroundImage","updateBgImage","onClearCanvas","clearCanvas","onDownloadImage","downloadImageTask","bgImageNameWatcher","$data","bgFileName","_component_PaintCanvas","onMousePos","updateMousePos","onClearBgFilename","clearBGfileName","onUpdateImageList","updateImageList","clearCanvasWatcher","isCanvasClear","imageBgWatcher","bgImage","colorBgWatcher","bgColor","brushSize","brushColor","saveImageWatcher","saveImage","downloadImageWatcher","downloadImage","showImageOnCanvasWatcher","showImage","_component_Statistics","pos","_component_LeftImages","onSaveImage","saveImageTask","onShowOnCanvas","showImageTask","savedImageWatcher","savedImage","for","type","min","max","$event","onChange","_cache","_ctx","$emit","backgroundColor","args","getBackgroundImage","onClick","backgroundImage","props","Boolean","methods","event","selectedFile","target","files","this","URL","createObjectURL","watch","document","getElementById","__exports__","width","canvasWidth","height","canvasHeight","ImageService","constructor","useServer","process","forceLocalStorage","serverUrl","VUE_APP_SERVER_URL","currentMode","serverAvailable","checkServerAvailability","fallbackToLocalStorage","controller","AbortController","timeoutId","setTimeout","abort","response","fetch","method","signal","clearTimeout","ok","console","log","error","fallbackResponse","fallbackError","getCurrentMode","getImagesFromLocalStorage","json","Error","warn","imageData","payload","image","src","saveImageToLocalStorage","headers","body","JSON","stringify","deleteAllImagesFromLocalStorage","deleteImage","index","images","localStorage","setItem","parse","getItem","removeItem","success","xPos","yPos","canvas","context","isDrawing","insideCanvas","String","Number","updateMousePosition","rect","getBoundingClientRect","clientX","Math","floor","left","clientY","top","newMousePos","penDown","beginPath","moveTo","draw","lineTo","strokeStyle","lineWidth","stroke","penUp","style","clearRect","setBackgroundColor","setBackgroundImage","selectedImage","prepareForSave","background","Image","onload","imageRatio","newWidth","newHeight","globalCompositeOperation","drawImage","fillStyle","fillRect","canvasDataURL","toDataURL","imageService","downloadCanvasAsImage","tempCanvas","createElement","tempCtx","getContext","download","canvasToDownload","a","href","click","crossOrigin","onerror","showSelectedOnCanvas","color","shouldDownload","mounted","addEventListener","_hoisted_2","_toDisplayString","$props","_hoisted_3","_hoisted_4","default","class","_normalizeClass","clearAllImages","_Fragment","_renderList","srcElement","currentSrc","_hoisted_5","getAllImages","deleteAllImages","clearImagesDiv","parent","firstChild","removeChild","updateCurrentMode","components","Toolbar","PaintCanvas","Statistics","LeftImages","size","parseInt","render","createApp","App","mount"],"mappings":"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","file":"js/app.92014519.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Statistics.vue?vue&type=style&index=0&id=1c91d81e&scoped=true&lang=css\"","<template>\n  <div id=\"wrapper\">\n    <main>\n      <h1>Paint 2.0</h1>\n      <Toolbar\n        @change-brush-color=\"updateBrushColor\"\n        @change-brush-size=\"updateBrushSize\"\n        @change-background-color=\"updateBgColor\"\n        @change-background-image=\"updateBgImage\"\n        @clear-canvas=\"clearCanvas\"\n        @download-image=\"downloadImageTask\"\n        :bgImageNameWatcher=\"bgFileName\"\n      />\n      <PaintCanvas\n        @mouse-pos=\"updateMousePos\"\n        @clear-bg-filename=\"clearBGfileName\"\n        @update-image-list=\"updateImageList\"\n        :clearCanvasWatcher=\"isCanvasClear\"\n        :imageBgWatcher=\"bgImage\"\n        :colorBgWatcher=\"bgColor\"\n        :brushSize=\"brushSize\"\n        :brushColor=\"brushColor\"\n        :saveImageWatcher=\"saveImage\"\n        :downloadImageWatcher=\"downloadImage\"\n        :showImageOnCanvasWatcher=\"showImage\"\n      />\n      <Statistics :pos=\"pos\" :brushSize=\"brushSize\" :brushColor=\"brushColor\" />\n    </main>\n    <aside>\n      <LeftImages\n        @save-image=\"saveImageTask\"\n        @show-on-canvas=\"showImageTask\"\n        :savedImageWatcher=\"savedImage\"\n      />\n    </aside>\n  </div>\n</template>\n\n<script>\nimport Toolbar from \"./components/Toolbar.vue\";\nimport PaintCanvas from \"./components/PaintCanvas.vue\";\nimport Statistics from \"./components/Statistics.vue\";\nimport LeftImages from \"./components/LeftImages.vue\";\n\nexport default {\n  name: \"App\",\n  components: {\n    Toolbar,\n    PaintCanvas,\n    Statistics,\n    LeftImages,\n  },\n  data() {\n    return {\n      pos: {},\n      brushColor: \"#000000\",\n      brushSize: 1,\n      bgColor: \"#ffffff\",\n      bgImage: \"\",\n      showImage: \"\",\n      isCanvasClear: false,\n      bgFileName: false,\n      saveImage: false,\n      downloadImage: false,\n      savedImage: \"\",\n    };\n  },\n  methods: {\n    updateMousePos(newMousePos) {\n      this.pos = newMousePos;\n    },\n    updateBrushColor(color) {\n      this.brushColor = color;\n    },\n    updateBrushSize(size) {\n      this.brushSize = parseInt(size);\n    },\n    updateBgColor(color) {\n      this.bgColor = color;\n    },\n    updateBgImage(image) {\n      this.bgImage = image;\n    },\n    clearCanvas() {\n      this.isCanvasClear = !this.isCanvasClear;\n    },\n    clearBGfileName() {\n      this.bgFileName = !this.bgFileName;\n    },\n    saveImageTask() {\n      this.saveImage = !this.saveImage;\n    },\n    downloadImageTask() {\n      this.downloadImage = !this.downloadImage;\n      setTimeout(() => {\n        this.downloadImage = !this.downloadImage;\n      }, 100);\n    },\n    showImageTask(image) {\n      this.showImage = image;\n    },\n    updateImageList(image) {\n      this.savedImage = image;\n    },\n  },\n};\n</script>\n\n<style>\n#wrapper {\n  display: flex;\n  justify-content: center;\n  gap: 50px;\n  padding: 20px;\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  color: #2c3e50;\n  align-items: flex-start;\n}\n\nmain {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 15px;\n}\n\naside {\n  margin-top: 50px;\n}\n</style>\n","<template>\n  <div id=\"toolbar\">\n    <div>\n      <label for=\"brush-size\">Size </label\n      ><input\n        id=\"brush-size\"\n        type=\"range\"\n        min=\"1\"\n        max=\"20\"\n        v-model=\"brushSize\"\n        @change=\"$emit('change-brush-size', brushSize)\"\n      />\n      <label for=\"brush-color\">Color </label\n      ><input\n        id=\"brush-color\"\n        type=\"color\"\n        v-model=\"brushColor\"\n        @change=\"$emit('change-brush-color', brushColor)\"\n      />\n      <label for=\"background-color\">Background </label\n      ><input\n        id=\"background-color\"\n        type=\"color\"\n        v-model=\"backgroundColor\"\n        @change=\"$emit('change-background-color', backgroundColor)\"\n      />\n    </div>\n    <div>\n      <label for=\"fileLoadBtn\">Load image </label>\n      <input id=\"fileLoadBtn\" type=\"file\" @change=\"getBackgroundImage\" />\n      <button id=\"downloadBtn\" @click=\"$emit('download-image')\">\n        Download\n      </button>\n      <button id=\"clearBtn\" @click=\"$emit('clear-canvas')\">Clear</button>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"Toolbar\",\n  data() {\n    return {\n      brushSize: 1,\n      brushColor: \"#000000\",\n      backgroundColor: \"#FFFFFF\",\n      backgroundImage: null,\n    };\n  },\n  props: {\n    bgImageNameWatcher: Boolean,\n  },\n  methods: {\n    getBackgroundImage(event) {\n      const selectedFile = event.target.files[0];\n      this.backgroundImage = URL.createObjectURL(selectedFile);\n      this.$emit(\"change-background-image\", this.backgroundImage);\n    },\n  },\n  watch: {\n    bgImageNameWatcher: function () {\n      document.getElementById(\"fileLoadBtn\").value = \"\";\n    },\n  },\n};\n</script>\n\n<style scoped>\n#toolbar {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n  padding: 15px;\n  border: 1px solid #ccc;\n  border-radius: 5px;\n  background-color: #f9f9f9;\n}\n\n#toolbar > div {\n  display: flex;\n  align-items: center;\n  gap: 15px;\n}\n\nlabel {\n  font-weight: bold;\n}\n\ninput[type=\"range\"] {\n  width: 150px;\n}\n\ninput[type=\"color\"] {\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  appearance: none;\n  width: 30px;\n  height: 30px;\n  background-color: transparent;\n  border: none;\n  cursor: pointer;\n}\ninput[type=\"color\"]::-webkit-color-swatch {\n  border-radius: 50%;\n  border: 1px solid #ccc;\n}\ninput[type=\"color\"]::-moz-color-swatch {\n  border-radius: 50%;\n  border: 1px solid #ccc;\n}\n\nbutton {\n  padding: 8px 12px;\n  border: none;\n  color: white;\n  border-radius: 4px;\n  cursor: pointer;\n  transition: background-color 0.3s;\n}\n\n#clearBtn {\n  background-color: #f44336;\n}\n\n#clearBtn:hover {\n  background-color: #da190b;\n}\n\n#downloadBtn {\n  background-color: #2196f3;\n}\n\n#downloadBtn:hover {\n  background-color: #0b7dda;\n}\n</style>\n","import { render } from \"./Toolbar.vue?vue&type=template&id=72846347&scoped=true\"\nimport script from \"./Toolbar.vue?vue&type=script&lang=js\"\nexport * from \"./Toolbar.vue?vue&type=script&lang=js\"\n\nimport \"./Toolbar.vue?vue&type=style&index=0&id=72846347&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/runner/work/PaintApp/PaintApp/client/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-72846347\"]])\n\nexport default __exports__","<template>\n  <canvas\n    id=\"paintCanvas\"\n    :width=\"canvasWidth\"\n    :height=\"canvasHeight\"\n    @change-brush-color=\"updateBrushColor\"\n    @change-brush-size=\"updateBrushSize\"\n  >\n    Your browser does not support HTML5\n  </canvas>\n</template>\n\n<script>\nimport imageService from \"../services/imageService\";\n\nexport default {\n  name: \"PaintCanvas\",\n  data() {\n    return {\n      xPos: 0,\n      yPos: 0,\n      canvasWidth: 600,\n      canvasHeight: 400,\n      canvas: null,\n      context: null,\n      isDrawing: false,\n      insideCanvas: false,\n    };\n  },\n  props: {\n    clearCanvasWatcher: Boolean,\n    imageBgWatcher: String,\n    colorBgWatcher: String,\n    brushColor: String,\n    brushSize: Number,\n    showImageOnCanvasWatcher: String,\n    saveImageWatcher: Boolean,\n    downloadImageWatcher: Boolean,\n  },\n  methods: {\n    updateMousePosition(event) {\n      const rect = this.canvas.getBoundingClientRect();\n      this.xPos = event.clientX - Math.floor(rect.left);\n      this.yPos = event.clientY - Math.floor(rect.top);\n\n      const newMousePos = {\n        xPos: this.xPos,\n        yPos: this.yPos,\n      };\n\n      this.$emit(\"mouse-pos\", newMousePos);\n    },\n    penDown() {\n      this.isDrawing = true;\n      this.context.beginPath();\n      this.context.moveTo(this.xPos, this.yPos);\n    },\n    draw() {\n      this.context.lineTo(this.xPos, this.yPos);\n      this.context.strokeStyle = this.brushColor;\n      this.context.lineWidth = this.brushSize;\n      this.context.stroke();\n    },\n    penUp() {\n      this.isDrawing = false;\n    },\n    clearCanvas() {\n      this.backgroundColor = \"#FFFFFF\";\n      this.backgroundImage = null;\n      this.canvas.style.backgroundColor = this.backgroundColor;\n      this.canvas.style.backgroundImage = ``;\n      this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);\n      this.$emit(\"clear-bg-filename\");\n    },\n    setBackgroundColor() {\n      this.backgroundImage = null;\n      this.$emit(\"clear-bg-filename\");\n      this.canvas.style.backgroundImage = ``;\n      this.canvas.style.backgroundColor = this.backgroundColor;\n    },\n    setBackgroundImage(selectedImage) {\n      this.backgroundColor = \"#FFFFFF\";\n      this.canvas.style.backgroundColor = this.backgroundColor;\n      this.backgroundImage = selectedImage;\n      this.canvas.style.backgroundImage = `url('${this.backgroundImage}')`;\n    },\n    prepareForSave() {\n      if (!this.backgroundImage) {\n        this.context.fillStyle = this.backgroundColor;\n        this.context.globalCompositeOperation = \"destination-over\";\n        this.context.fillRect(0, 0, this.canvas.width, this.canvas.height);\n        this.context.globalCompositeOperation = \"source-over\";\n        this.saveImage();\n      } else {\n        const background = new Image();\n        background.src = this.backgroundImage;\n        background.onload = () => {\n          //keep image original ratio\n          const imageRatio = background.width / background.height;\n          let newWidth = this.canvas.width;\n          let newHeight = newWidth / imageRatio;\n          if (newHeight > this.canvas.height) {\n            newHeight = this.canvas.height;\n            newWidth = newHeight * imageRatio;\n          }\n          //todo: if image has smaller dimentions and you keep its original ratio consider to center the image in the canvas\n          this.context.globalCompositeOperation = \"destination-over\";\n          this.context.drawImage(background, 0, 0, newWidth, newHeight);\n          this.context.globalCompositeOperation = \"source-over\";\n          this.saveImage();\n        };\n      }\n    },\n    async saveImage() {\n      const canvasDataURL = this.canvas.toDataURL();\n\n      // save using the service\n      await imageService.saveImage(canvasDataURL);\n\n      // update list in LeftImages Component\n      const payload = JSON.stringify({\n        image: { src: canvasDataURL },\n      });\n      this.$emit(\"update-image-list\", payload);\n\n      // clear canvas for next painting\n      this.clearCanvas();\n    },\n    downloadCanvasAsImage() {\n      const tempCanvas = document.createElement(\"canvas\");\n      const tempCtx = tempCanvas.getContext(\"2d\");\n      tempCanvas.width = this.canvasWidth;\n      tempCanvas.height = this.canvasHeight;\n\n      const download = (canvasToDownload) => {\n        const canvasDataURL = canvasToDownload.toDataURL(\"image/png\");\n        const a = document.createElement(\"a\");\n        a.href = canvasDataURL;\n        a.download = \"myDrawing.png\";\n        a.click();\n      };\n\n      if (this.backgroundImage) {\n        const background = new Image();\n        background.crossOrigin = \"anonymous\";\n        background.src = this.backgroundImage;\n        background.onload = () => {\n          const imageRatio = background.width / background.height;\n          let newWidth = tempCanvas.width;\n          let newHeight = newWidth / imageRatio;\n          if (newHeight > tempCanvas.height) {\n            newHeight = tempCanvas.height;\n            newWidth = newHeight * imageRatio;\n          }\n          tempCtx.drawImage(background, 0, 0, newWidth, newHeight);\n          tempCtx.drawImage(this.canvas, 0, 0);\n          download(tempCanvas);\n        };\n        background.onerror = () => {\n          download(this.canvas);\n        };\n      } else {\n        tempCtx.fillStyle = this.backgroundColor || \"#ffffff\";\n        tempCtx.fillRect(0, 0, tempCanvas.width, tempCanvas.height);\n        tempCtx.drawImage(this.canvas, 0, 0);\n        download(tempCanvas);\n      }\n    },\n    showSelectedOnCanvas(image) {\n      this.clearCanvas();\n      this.backgroundImage = image;\n      this.canvas.style.backgroundImage = `url('${this.backgroundImage}')`;\n    },\n  },\n  watch: {\n    clearCanvasWatcher: function () {\n      this.clearCanvas();\n    },\n    imageBgWatcher: function (image) {\n      this.setBackgroundImage(image);\n    },\n    colorBgWatcher: function (color) {\n      this.backgroundColor = color;\n      this.setBackgroundColor();\n    },\n    showImageOnCanvasWatcher: function (image) {\n      this.showSelectedOnCanvas(image);\n    },\n    saveImageWatcher: function () {\n      this.prepareForSave();\n    },\n    downloadImageWatcher: function (shouldDownload) {\n      if (shouldDownload) {\n        this.downloadCanvasAsImage();\n      }\n    },\n  },\n  mounted() {\n    this.canvas = document.getElementById(\"paintCanvas\");\n    this.context = this.canvas.getContext(\"2d\");\n\n    this.clearCanvas();\n    this.canvas.addEventListener(\"mousedown\", () => {\n      this.penDown();\n    });\n\n    this.canvas.addEventListener(\"mousemove\", (event) => {\n      this.updateMousePosition(event);\n      if (this.isDrawing && this.insideCanvas) {\n        this.draw();\n      }\n    });\n\n    this.canvas.addEventListener(\"mouseup\", () => {\n      this.penUp();\n    });\n\n    this.canvas.addEventListener(\"mouseenter\", () => {\n      this.insideCanvas = true;\n    });\n\n    this.canvas.addEventListener(\"mouseout\", () => {\n      this.insideCanvas = false;\n      //uncomment if you want to make the drawing stop if you exit the canvas area\n      // if (this.isDrawing) {\n      //   this.penUp();\n      // }\n    });\n  },\n};\n</script>\n\n<style scoped>\n#paintCanvas {\n  width: 600px;\n  height: 400px;\n  border: 1px solid #ccc;\n  cursor: crosshair;\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n  border-radius: 5px;\n}\n</style>\n","class ImageService {\n  constructor() {\n    this.useServer = process.env.VUE_APP_USE_SERVER === 'true';\n    this.forceLocalStorage = process.env.VUE_APP_USE_SERVER === 'false';\n    this.serverUrl = process.env.VUE_APP_SERVER_URL || 'http://localhost:3000';\n    this.currentMode = 'localStorage'; // Default to localStorage\n    this.serverAvailable = false;\n    \n    // Test server availability if server mode is enabled or if no explicit mode is set\n    if (this.useServer || (!this.useServer && !this.forceLocalStorage)) {\n      this.checkServerAvailability();\n    }\n  }\n\n  async checkServerAvailability() {\n    // If explicitly forced to localStorage mode, skip server check\n    if (this.forceLocalStorage) {\n      this.fallbackToLocalStorage();\n      return;\n    }\n\n    try {\n      const controller = new AbortController();\n      const timeoutId = setTimeout(() => controller.abort(), 2000);\n      \n      const response = await fetch(`${this.serverUrl}/health`, {\n        method: 'GET',\n        signal: controller.signal,\n      });\n      \n      clearTimeout(timeoutId);\n      \n      if (response.ok) {\n        this.serverAvailable = true;\n        this.currentMode = 'server';\n        console.log('Server mode active');\n      } else {\n        this.fallbackToLocalStorage();\n      }\n    } catch (error) {\n      // Try a simple ping to the images endpoint as fallback\n      try {\n        const controller = new AbortController();\n        const timeoutId = setTimeout(() => controller.abort(), 2000);\n        \n        const fallbackResponse = await fetch(`${this.serverUrl}/images`, {\n          method: 'GET',\n          signal: controller.signal,\n        });\n        \n        clearTimeout(timeoutId);\n        \n        if (fallbackResponse.ok) {\n          this.serverAvailable = true;\n          this.currentMode = 'server';\n          console.log('Server mode active (via fallback check)');\n        } else {\n          this.fallbackToLocalStorage();\n        }\n      } catch (fallbackError) {\n        this.fallbackToLocalStorage();\n      }\n    }\n  }\n\n  fallbackToLocalStorage() {\n    this.serverAvailable = false;\n    this.currentMode = 'localStorage';\n    console.log('Server unavailable, falling back to localStorage mode');\n  }\n\n  getCurrentMode() {\n    return this.currentMode;\n  }\n\n  // Get all images\n  async getAllImages() {\n    if (this.currentMode === 'server' && this.serverAvailable) {\n      try {\n        const response = await fetch(`${this.serverUrl}/images`);\n        if (response.ok) {\n          return await response.json();\n        } else {\n          throw new Error('Server request failed');\n        }\n      } catch (error) {\n        console.warn('Server request failed, falling back to localStorage:', error);\n        this.fallbackToLocalStorage();\n        return this.getImagesFromLocalStorage();\n      }\n    } else {\n      return this.getImagesFromLocalStorage();\n    }\n  }\n\n  // Save image\n  async saveImage(imageData) {\n    const payload = {\n      image: { src: imageData }\n    };\n\n    if (this.currentMode === 'server' && this.serverAvailable) {\n      try {\n        const response = await fetch(`${this.serverUrl}/images`, {\n          method: 'POST',\n          headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify(payload),\n        });\n        \n        if (response.ok) {\n          return await response.json();\n        } else {\n          throw new Error('Server request failed');\n        }\n      } catch (error) {\n        console.warn('Server save failed, falling back to localStorage:', error);\n        this.fallbackToLocalStorage();\n        return this.saveImageToLocalStorage(payload);\n      }\n    } else {\n      return this.saveImageToLocalStorage(payload);\n    }\n  }\n\n  // Delete all images\n  async deleteAllImages() {\n    if (this.currentMode === 'server' && this.serverAvailable) {\n      try {\n        const response = await fetch(`${this.serverUrl}/images`, {\n          method: 'DELETE',\n          headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json',\n          },\n        });\n        \n        if (response.ok) {\n          return await response.json();\n        } else {\n          throw new Error('Server request failed');\n        }\n      } catch (error) {\n        console.warn('Server delete failed, falling back to localStorage:', error);\n        this.fallbackToLocalStorage();\n        return this.deleteAllImagesFromLocalStorage();\n      }\n    } else {\n      return this.deleteAllImagesFromLocalStorage();\n    }\n  }\n\n  // Delete single image (localStorage only for now)\n  deleteImage(index) {\n    const images = this.getImagesFromLocalStorage();\n    images.splice(index, 1);\n    localStorage.setItem('images', JSON.stringify(images));\n    return images;\n  }\n\n  // LocalStorage methods\n  getImagesFromLocalStorage() {\n    return JSON.parse(localStorage.getItem('images')) || [];\n  }\n\n  saveImageToLocalStorage(payload) {\n    const images = this.getImagesFromLocalStorage();\n    images.push(payload.image);\n    localStorage.setItem('images', JSON.stringify(images));\n    return payload;\n  }\n\n  deleteAllImagesFromLocalStorage() {\n    localStorage.removeItem('images');\n    return { success: true };\n  }\n}\n\n// Export singleton instance\nexport default new ImageService();\n","import { render } from \"./PaintCanvas.vue?vue&type=template&id=1556aa11&scoped=true\"\nimport script from \"./PaintCanvas.vue?vue&type=script&lang=js\"\nexport * from \"./PaintCanvas.vue?vue&type=script&lang=js\"\n\nimport \"./PaintCanvas.vue?vue&type=style&index=0&id=1556aa11&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/runner/work/PaintApp/PaintApp/client/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1556aa11\"]])\n\nexport default __exports__","<template>\n  <div id=\"statistics\">\n    <span id=\"mouse-pos\">Pos: {{ pos.xPos }},{{ pos.yPos }}</span>\n    <span id=\"brush-size\">Brush Size: {{ brushSize }}</span>\n    <span id=\"brush-color\">Brush Color: {{ brushColor }}</span>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"Statistics\",\n  props: {\n    pos: Object,\n    brushSize: {\n      type: Number,\n      default: 1,\n    },\n    brushColor: {\n      type: String,\n      default: \"#000000\",\n    },\n  },\n};\n</script>\n\n<style scoped>\n#statistics span {\n  display: inline-block;\n  margin-left: 20px;\n}\n</style>\n","import { render } from \"./Statistics.vue?vue&type=template&id=1c91d81e&scoped=true\"\nimport script from \"./Statistics.vue?vue&type=script&lang=js\"\nexport * from \"./Statistics.vue?vue&type=script&lang=js\"\n\nimport \"./Statistics.vue?vue&type=style&index=0&id=1c91d81e&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/runner/work/PaintApp/PaintApp/client/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1c91d81e\"]])\n\nexport default __exports__","<template>\n  <div id=\"leftImages\">\n    <h3>Saved Images</h3>\n    <div class=\"mode-indicator\">\n      <span class=\"mode-badge\" :class=\"currentMode\">\n        {{ currentMode === 'server' ? 'Server Mode' : 'Local Storage' }}\n      </span>\n    </div>\n    <button @click=\"$emit('save-image')\">Save image</button>\n    <button @click=\"clearAllImages\">Delete All</button>\n    <div id=\"imagesList\">\n      <div\n        class=\"image-container\"\n        :key=\"index\"\n        v-for=\"(image, index) in images\"\n      >\n        <img\n          :src=\"image.src\"\n          @click=\"$emit('show-on-canvas', $event.srcElement.currentSrc)\"\n        />\n        <button class=\"delete-btn\" @click=\"deleteImage(index)\">Delete</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport imageService from '../services/imageService';\n\nexport default {\n  name: \"LeftImages\",\n  data() {\n    return {\n      images: [],\n      currentMode: 'localStorage',\n    };\n  },\n  props: {\n    savedImageWatcher: String,\n  },\n  methods: {\n    async deleteImage(index) {\n      this.images = imageService.deleteImage(index);\n    },\n    async getAllImages() {\n      return await imageService.getAllImages();\n    },\n    async deleteAllImages() {\n      await imageService.deleteAllImages();\n      this.images = [];\n    },\n    clearImagesDiv() {\n      const parent = document.getElementById(\"imagesList\");\n      while (parent.firstChild) {\n        parent.removeChild(parent.firstChild);\n      }\n    },\n    async clearAllImages() {\n      await this.deleteAllImages();\n      this.clearImagesDiv();\n    },\n    updateCurrentMode() {\n      this.currentMode = imageService.getCurrentMode();\n    },\n  },\n  watch: {\n    savedImageWatcher: function (image) {\n      this.images.push(JSON.parse(image).image);\n    },\n  },\n  async created() {\n    this.images = await this.getAllImages();\n    this.updateCurrentMode();\n    \n    // Update mode after server check completes\n    setTimeout(() => {\n      this.updateCurrentMode();\n    }, 1000);\n  },\n};\n</script>\n\n<style scoped>\n#leftImages {\n  width: 260px;\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n  padding: 15px;\n  border: 1px solid #ccc;\n  border-radius: 5px;\n  background-color: #f9f9f9;\n}\n\n#imagesList {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 10px;\n  height: 400px;\n  overflow-y: auto;\n  border-top: 1px solid #eee;\n  padding-top: 10px;\n}\n\nimg {\n  width: 80%;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  cursor: pointer;\n  transition: transform 0.2s;\n}\n\nimg:hover {\n  transform: scale(1.05);\n}\n\nbutton {\n  padding: 8px 12px;\n  border: none;\n  background-color: #4caf50;\n  color: white;\n  border-radius: 4px;\n  cursor: pointer;\n  transition: background-color 0.3s;\n}\n\nbutton:hover {\n  background-color: #45a049;\n}\n\n.image-container {\n  position: relative;\n}\n\n.delete-btn {\n  position: absolute;\n  top: 5px;\n  right: 1px;\n  background-color: #f44336;\n  padding: 2px 5px;\n  font-size: 12px;\n}\n\n.delete-btn:hover {\n  background-color: #da190b;\n}\n\n.mode-indicator {\n  text-align: center;\n  margin-bottom: 5px;\n}\n\n.mode-badge {\n  font-size: 12px;\n  padding: 4px 8px;\n  border-radius: 12px;\n  font-weight: bold;\n  text-transform: uppercase;\n}\n\n.mode-badge.server {\n  background-color: #4CAF50;\n  color: white;\n}\n\n.mode-badge.localStorage {\n  background-color: #2196F3;\n  color: white;\n}\n</style>\n","import { render } from \"./LeftImages.vue?vue&type=template&id=b956f69c&scoped=true\"\nimport script from \"./LeftImages.vue?vue&type=script&lang=js\"\nexport * from \"./LeftImages.vue?vue&type=script&lang=js\"\n\nimport \"./LeftImages.vue?vue&type=style&index=0&id=b956f69c&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/runner/work/PaintApp/PaintApp/client/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-b956f69c\"]])\n\nexport default __exports__","import { render } from \"./App.vue?vue&type=template&id=a6d42f7e\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=a6d42f7e&lang=css\"\n\nimport exportComponent from \"/home/runner/work/PaintApp/PaintApp/client/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createApp } from \"vue\";\nimport App from \"./App.vue\";\n\ncreateApp(App).mount(\"#app\");\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./App.vue?vue&type=style&index=0&id=a6d42f7e&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./PaintCanvas.vue?vue&type=style&index=0&id=1556aa11&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./LeftImages.vue?vue&type=style&index=0&id=b956f69c&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Toolbar.vue?vue&type=style&index=0&id=72846347&scoped=true&lang=css\""],"sourceRoot":""}